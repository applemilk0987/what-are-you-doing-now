name: Deploy React App to Pages

on:
  push:
    branches:
      - main  # ğŸ’¡ í”„ë¡œì íŠ¸ì˜ ë©”ì¸ ë¸Œëœì¹˜ ì´ë¦„ (main ë˜ëŠ” master)ì— ë§ì¶°ì£¼ì„¸ìš”.

permissions:
  contents: read   # ì½”ë“œë¥¼ ì½ì–´ì˜¤ëŠ” ê¶Œí•œ
  pages: write     # GitHub Pages ë°°í¬ë¥¼ ìœ„í•œ ê¶Œí•œ (í•„ìˆ˜)
  id-token: write  # OIDC ì¸ì¦ì„ ìœ„í•œ ê¶Œí•œ (Pages ë°°í¬ ì‹œ ê¶Œì¥)

jobs:
  build_and_deploy: # ì‘ì—… ì´ë¦„ì€ build_and_deployë¡œ í†µì¼
    runs-on: ubuntu-latest
    
    # ğŸ’¡ Missing environment ì˜¤ë¥˜ í•´ê²°: github-pages í™˜ê²½ì„ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •
    environment:
      name: github-pages 
      url: ${{ steps.deployment.outputs.page_url }}
      
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4

      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20' # ğŸ’¡ ì‚¬ìš©í•˜ëŠ” Node.js ë²„ì „ì— ë§ì¶°ì£¼ì„¸ìš”.

      - name: Install dependencies
        run: npm install

      - name: Build project (generates dist folder)
        run: npm run build

      - name: Setup Pages
        uses: actions/configure-pages@v4

      # â­ í•µì‹¬: dist í´ë”ë¥¼ ë°°í¬ ì•„í‹°íŒ©íŠ¸ë¡œ ì—…ë¡œë“œ â­
      - name: Upload artifact
        uses: actions/upload-pages-artifact@v4
        with:
          path: './dist' 
      
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4